<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Boba Tea Simulator</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
<style>
  body {
    margin: 0;
    background: #FFEBCD; /* warm tea background */
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    border: 2px solid #a0522d; /* cup outline */
    border-radius: 20px;
  }
</style>
</head>
<body>
<canvas id="bobaCanvas"></canvas>
<script>
// --- Matter.js setup ---
const { Engine, Render, World, Bodies, Body } = Matter;

const engine = Engine.create();
const world = engine.world;

const canvasWidth = 400;
const canvasHeight = 600;

const render = Render.create({
    element: document.body,
    engine: engine,
    canvas: document.getElementById('bobaCanvas'),
    options: {
        width: canvasWidth,
        height: canvasHeight,
        wireframes: false,
        background: '#F5DEB3' // tea color
    }
});

Engine.run(engine);
Render.run(render);

// --- Cup walls ---
const cupWidth = 200;
const cupHeight = 400;
const cupX = canvasWidth / 2;
const cupY = canvasHeight / 2;

const wallThickness = 20;

const leftWall = Bodies.rectangle(cupX - cupWidth/2, cupY, wallThickness, cupHeight, { isStatic: true });
const rightWall = Bodies.rectangle(cupX + cupWidth/2, cupY, wallThickness, cupHeight, { isStatic: true });
const bottom = Bodies.rectangle(cupX, cupY + cupHeight/2, cupWidth, wallThickness, { isStatic: true });

World.add(world, [leftWall, rightWall, bottom]);

// --- Liquid surface (optional) ---
const liquid = Bodies.rectangle(cupX, cupY + 50, cupWidth - 20, 10, {
    isStatic: true,
    render: { fillStyle: '#D2B48C' } // lighter tea color
});
World.add(world, liquid);

// --- Boba pearls ---
function createBoba(x, y) {
    const boba = Bodies.circle(x, y, 15, {
        restitution: 0.5,
        friction: 0.1,
        density: 0.002,
        render: {
            fillStyle: '#3E1F0D'
        }
    });
    World.add(world, boba);
}

// generate multiple pearls
for(let i = 0; i < 20; i++){
    createBoba(cupX - 80 + Math.random()*160, 100 + Math.random()*50);
}

// --- Stirring effect ---
setInterval(() => {
    world.bodies.forEach(body => {
        if (!body.isStatic) {
            Body.applyForce(body, body.position, { x: (Math.random()-0.5)*0.005, y: -0.002 });
        }
    });
}, 100);

</script>
</body>
</html>
